<!DOCTYPE html>
<html lang="ja">
<head>
  <title>持っていますブックマークレット</title>
  <meta charset="UTF-8">
  <meta name="keywords" content="Amazon,アマゾン,I own it,持っています,Bookmarklet,ブックマークレット">
  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/monokai.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <style>q:before{content: "「"} q:after{content: "」"}</style>
</head>
<body style="box-sizing: border-box; max-width: 980px; margin: auto; padding: 15px">

<article class="markdown-body">
  <h1><q>持っています</q>ブックマークレット</h1>

  <p>Amazonの<q>持っています</q>にチェックを入れるブックマークレットです。</p>
  <p>PCおよびモバイルサイト両方に対応しています(<time>2019/03/14</time>現在)。できるだけコード量を少なくしています。</p>

  <p>🔖<a href="javascript:(function()%7BP.when('jQuery').execute(j%3D%3E%7Bvar%20asin%3Dj('%23asin%2C%23ASIN').val()%2Cdata%3D%7B'session-id'%3Aj('%23sid%2C%23session-id').val()%2C'rating_asin'%3Aasin%2C'return.response'%3A'204'%7D%3Bdata%5Basin%2B'_asin.rating.owned'%5D%3D'OWN'%3Bj.post('%2Fgp%2Fyourstore%2Flegacy%2Fratings%2Fsubmit.html'%2Cdata).done(()%3D%3Ealert('%E7%99%BB%E9%8C%B2%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F')).fail(a%3D%3Ealert('%E7%99%BB%E9%8C%B2%E5%A4%B1%E6%95%97%EF%BC%9A'%2Ba.status))%7D)%7D)()">持っています</a></p>

  <label for="url">URL:</label>
  <input style="width: 100%" name="url" type="text" readonly value="javascript:(function()%7BP.when('jQuery').execute(j%3D%3E%7Bvar%20asin%3Dj('%23asin%2C%23ASIN').val()%2Cdata%3D%7B'session-id'%3Aj('%23sid%2C%23session-id').val()%2C'rating_asin'%3Aasin%2C'return.response'%3A'204'%7D%3Bdata%5Basin%2B'_asin.rating.owned'%5D%3D'OWN'%3Bj.post('%2Fgp%2Fyourstore%2Flegacy%2Fratings%2Fsubmit.html'%2Cdata).done(()%3D%3Ealert('%E7%99%BB%E9%8C%B2%E3%81%97%E3%81%BE%E3%81%97%E3%81%9F')).fail(a%3D%3Ealert('%E7%99%BB%E9%8C%B2%E5%A4%B1%E6%95%97%EF%BC%9A'%2Ba.status))%7D)%7D)()"></p>

  <aside class="markdown-body">
    <p>こちらの<a href="https://www.amazon.co.jp/gp/yourstore/iyr/ref=pd_ys_iyr_edit_own?ie=UTF8&collection=owned">「持っています」にチェックを入れた商品</a>ページに表示されます。</p>
  </aside>
</article>

<aside>
<pre><code>javascript:(function() {
  P.when('jQuery').execute(j => {
    var asin = j('#asin,#ASIN').val(),
     data = {
      'session-id': j('#sid,#session-id').val(),
      'rating_asin': asin,
      'return.response': '204'
    };
    data[asin + '_asin.rating.owned'] = 'OWN';
    j.post('/gp/yourstore/legacy/ratings/submit.html', data)
      .done(() => alert('登録しました'))
      .fail(a => alert('登録失敗：' + a.status))
  })
})()</code></pre>
</aside>

</body>
</html>
